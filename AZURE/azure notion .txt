
ENTRA-ID : AD SaaS, protocoles : OAuth 2.0, OpenID Connect, SAML 

AzADDS : Service manag√© qui re√ßoit une projection partielle des objets d'Entra ID, il ressemble √† un AD on promise.
         LDAP, Kerberos, NTLM, GPOs, etc
         deux AD/DNS virtuels 10.0.0.4 et 10.0.0.5 

les objets dans EntraID qui vont appara√Ætre sur AzADDS :
  -les users full cloud (cr√©√© dans Azure AD)
  -les users Synchronis√© via AD Connect
  -Groupe de s√©curit√© statique full cloud  (les grp dynamiques ou O365 ne remontent pas)
  -Groupe de s√©curit√© sur AD local synchronis√© via ADConnect

Les objets cr√©e sur Azure ADDS (users, groupes, machines inscrites dans AzADDS) ne remonte jamais sur EntraID

Avec ADConnect je peux synchroniser vers EntraID : 
 les users 
 les groupes
 les machines (utile pour hybrid join)

====

  Azure AD Join (Entra ID) : device Join √† ENTRA-ID directement, s'effectue via internet, pas besoin d'aller au r√©seau entreprise.
  
  -commande pour v√©rifier : 

   dsregcmd /status

    AzureAdJoined : YES  ‚Üí la machine est jointe √† Entra ID
    DomainJoined  : NO  ‚Üí la machine n'est pas jointe √† un domaine local (AD DS)

Hybrid Azure AD Join : la machine est domain join√©e √† AD DS local + enregistr√©e dans Entra ID  (sur ENTRAID : Entra hybrid joined)
‚ûú Sc√©nario courant en entreprise hybride (avec AD local + Microsoft 365)
   Combine GPO local + SSO cloud
   
1-Machine Windows est joint √† un domaine local (via AD DS)
2-Azure AD Connect est configur√© pour :
  synchroniser les objets ordinateurs
  faire l‚Äôenregistrement automatique des postes
  La machine devient automatiquement visible dans Entra ID
  ‚Üí statut : "Hybrid Azure AD Joined"

  commande pour v√©rifier sur la machine : 

  dsregcmd /status

    AzureAdJoined : YES  ‚Üí la machine est jointe √† Entra ID
    DomainJoined  : YES  ‚Üí la machine est jointe au domaine local (AD DS)

======================
    Pour l'AzADDS, je peux y joindre des machines √† conditions qu'elles pingent les IP DNS mon Azure ADDS (exemple : VM dans le m√™me Vnet que mon AzADDS)

    je peux joindre aussi une VM sur azure sur mon AzADDS, elle doit pinger les IP AzADDS (10.0.0.4 et 10.0.0.5)
       je peux joindre aussi des machines locales si ces machines sont connect√©es au vnet du AzADDS via un VPN IPSEC.
    Ensuite je peux cr√©er des GPO et les appliquer ‚Ä¶ comme un AD local
    mais ils ne vont jamais appara√Ætre sur EntraID

=====

12 mois gratuits de services premium comme :

B1S VM Linux/Windows

SQL Database 250 Go

Azure Functions

Key Vault, Service Bus, etc.

======================================
Azure Storage Account ‚Äî Gratuit (5 Go blob + 250k requ√™tes/mois)
Permet de stocker fichiers, images, JSON, etc.

Acc√®s via REST, SDK, AzCopy, etc.

‚û°Ô∏è Pratique pour stocker du contenu statique ou des sauvegardes.
=======================================
Azure App Service (Web App) ‚Äî Gratuit Tier F1
H√©berge un site ou une API sans VM

Langages : .NET, Java, Node.js, Python, PHP

Offre gratuite F1 :

1 Go de stockage

60 minutes/jour de CPU

Nom d‚Äôh√¥te en *.azurewebsites.net

‚û°Ô∏è Parfait pour tester un site, une API Flask, un backend Node.js, etc.

===========================================================

üñºÔ∏è Frontend : Portfolio statique
Static Web Apps	Site HTML/React/Vite (contient un formulaire et √† la validation envoie le msg au backend)

  index.html (portfolio simple + formulaire)
  script.js (envoi du formulaire vers Azure Function)

üìÆ Backend : Azure Function (API POST /api/contact)
Cr√©er une Azure Function (HTTP Trigger) pour traiter les messages re√ßues
  ->Elle √©crit les msg dans un Azure Blob Storage
  -> envoie un mail de notification (SendGrid)

index.js : Fonction Azure qui utilise nodemailer + SendGrid
function.json : D√©claration du trigger HTTP
package.json : D√©pendances pour d√©ploiement auto (inclut nodemailer)


üìä Monitoring : Application Insights
Automatiquement li√© √† la Function
Logs, erreurs, performance

Pour tester : 
Acc√®de √† ton site via https://<nom>.azurestaticapps.net
Envoie un message via le formulaire ‚Üí re√ßu par mail +stock√© dans azure blob+visible dans Azure Monitor

================================

Backend classique Node.js (Express, etc.)	
 Tu d√©ploies un serveur qui tourne en continu
 Tu dois g√©rer l‚Äôh√©bergement et le scaling
 Co√ªt fixe (VM, container)

Azure Functions (serverless)
 Tu d√©ploies du code qui s‚Äôex√©cute √† la demande
 Azure g√®re le scaling  automatiquement
 Co√ªt bas√© sur l‚Äôusage r√©el


sur azure app web : 

1-App Web : h√©bergement pour ton application web (Node.js, .NET, PHP, etc.), donc backend ET frontend ensemble si tu veux
          c‚Äôest une VM/container qui tourne en permanence 

2-App web statique : H√©berge uniquement des fichiers statiques (HTML, CSS, JS).
                   Pas de backend ni serveur, juste le front
                   ->je peux la lier √† azure functions -> un backend serverless (trigger HTTP) 
                     sur la page static, je clic sur envoyer, -->appel azure functions pour -aller stocker dans une BD 
                                                                                            -envoie mail 
                                                                                            -autres actions

3-App Web + Base de donn√©es : Un template qui combine une app web du cas 1 + une base de donn√©es (souvent SQL Azure).

==========

c'est quoi un webhook : un point de terminaison HTTP (g√©n√©ralement une URL) que ton application expose pour recevoir des donn√©es ou des √©v√©nements depuis un   syst√®me externe avec GET, POST.
-azure function avec http trigger est un webhook.
-un backend peut contenir une partie webhook

======================

Storage account : 

New-AzStorageAccount -ResourceGroupName "commun" -Name "storagesouflouf" -Location "francecentral" -SkuName "Standard_LRS" -Kind "StorageV2"

tout Storage Account Azure est publiquement accessible par son URL, mais les donn√©es (blobs, fichiers...) sont priv√©es

https://storagesouflouf.blob.core.windows.net/

Les donn√©es √† l‚Äôint√©rieur (blobs d'un container, fichiers d'un partage ) seront priv√©es jusqu‚Äô√† ce que je les expose (avec SAS token ou container public)

Activer Blob Storage :
 cr√©er un container "mesblobs"
 s'ajouter le r√¥le "Storage Blob Data Contributor" sur IAM du storage account.
 y t√©l√©verser des blobs (fichiers)
 rendre un fichier upload√© accessible depuis le web en lecture seule pour 1h (SAS Token):
   $expiry = (Get-Date).AddHours(1)
   $sas = New-AzStorageBlobSASToken -Container "mesblobs" -Blob "Linux systemd.gif" -Context $ctx -ExpiryTime $expiry -Permission r -FullUri
   Write-Output $sas
 
 
File Storage (Azure Files) :
 cr√©er un partage
 monter comme lecteur z:

 Mais l'acc√®s est via internet.

Un Private Endpoint permet d‚Äôacc√©der √† un Storage Account via une IP priv√©e dans le VNet, sans sortir sur Internet.
  -->d√©sactiver l'acc√®s public : --allow-blob-public-access false
  -->activer l'option : Acc√®s via r√©seaux priv√©s uniquement

D√©tails du storage account : 
 Get-AzStorageAccount -ResourceGroupName "commun" -Name "storagesouflouf"

Location           : francecentral
SkuName            : Standard_LRS
Kind               : StorageV2
AccessTier         : Hot



  


